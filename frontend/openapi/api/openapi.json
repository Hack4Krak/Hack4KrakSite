{"openapi":"3.1.0","info":{"title":"Hack4Krak API Documentation","description":"","license":{"name":"GPL-3.0","url":"https://www.gnu.org/licenses/gpl-3.0.en.html"},"version":"0.2.0"},"servers":[{"url":"http://localhost:8080","description":"Local development server"},{"url":"http://api.hack4krak.pl","description":"Main API server"}],"paths":{"/":{"get":{"operationId":"index","responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResponseData"}}}}}}},"/auth/login":{"post":{"tags":["auth"],"operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginModel"}}},"required":true},"responses":{"200":{"description":"User successfully logged in."},"401":{"description":"Invalid credentials."},"500":{"description":"Internal server error."}}}},"/auth/logout":{"post":{"tags":["auth"],"operationId":"logout","responses":{"200":{"description":"User successfully logged out."}}}},"/auth/oauth/github":{"get":{"tags":["auth/oauth"],"operationId":"github","responses":{"200":{"description":"Redirects to GitHub for OAuth authorization"}}}},"/auth/oauth/github/callback":{"get":{"tags":["auth/oauth"],"operationId":"github_callback","parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OAuth2 flow completed successfully"},"401":{"description":"Invalid credentials"},"500":{"description":"Internal server errors."}}}},"/auth/oauth/google":{"get":{"tags":["auth/oauth"],"operationId":"google","responses":{"200":{"description":"Redirects to Google for OAuth authorization"}}}},"/auth/oauth/google/callback":{"get":{"tags":["auth/oauth"],"operationId":"google_callback","parameters":[{"name":"code","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OAuth2 flow completed successfully"},"401":{"description":"Invalid credentials"},"500":{"description":"Internal server errors."}}}},"/auth/refresh":{"post":{"tags":["auth"],"operationId":"refresh","responses":{"200":{"description":"New tokens are set as cookies"},"401":{"description":"Invalid credentials."}},"security":[{"access_token":[]}]}},"/auth/register":{"post":{"tags":["auth"],"operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterModel"}}},"required":true},"responses":{"200":{"description":"User successfully registered."},"400":{"description":"User already registered."},"500":{"description":"Internal server error."}}}},"/tasks/background/{task_id}":{"get":{"tags":["tasks"],"operationId":"background","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Correctly returned background image","content":{"text/plain":{"schema":{"type":"string"}}}},"400":{"description":"Invalid task id."},"404":{"description":"Task not found."},"500":{"description":"Internal server error."}}}},"/tasks/description/{task_id}":{"get":{"tags":["tasks"],"operationId":"description","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Correctly returned task description","content":{"text/plain":{"schema":{"type":"string"}}}},"400":{"description":"Invalid task id."},"404":{"description":"Task not found."},"500":{"description":"Internal server error."}}}},"/tasks/icon/{task_id}":{"get":{"tags":["tasks"],"operationId":"icon","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Correctly returned icon image.","content":{"text/plain":{"schema":{"type":"string"}}}},"400":{"description":"Invalid task id."},"404":{"description":"Task not found."},"500":{"description":"Internal server error."}}}},"/tasks/list":{"get":{"tags":["tasks"],"operationId":"list","responses":{"200":{"description":"Tasks successfully retrieved.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SimpleTask"}}}}},"500":{"description":"Internal server error."}}}},"/tasks/story/{task_id}":{"get":{"tags":["tasks"],"operationId":"story","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Correctly returned dialogues for this task.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TaskStory"}}}}},"400":{"description":"Invalid task id."},"404":{"description":"Task not found."},"500":{"description":"Internal server error."}}}},"/teams/create":{"post":{"tags":["teams"],"operationId":"create","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTeamModel"}}},"required":true},"responses":{"200":{"description":"Team successfully created."},"403":{"description":"User already belongs to team."},"409":{"description":"Team already exists."},"500":{"description":"Internal server error."}},"security":[{"access_token":[]}]}},"/teams/invitations/":{"get":{"tags":["teams/invitations"],"operationId":"get_invitations","responses":{"200":{"description":"Successfully retrieved invitations","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"404":{"description":"User doesn't have any invitations."},"500":{"description":"Internal server error."}},"security":[{"access_token":[]}]}},"/teams/invitations/accept_invitation/{team_name}":{"post":{"tags":["teams/invitations"],"operationId":"accept_invitation","parameters":[{"name":"team_name","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Successfully joined team."},"403":{"description":"User already belongs to team."},"404":{"description":"Invitation not found."},"500":{"description":"Internal server error."}},"security":[{"access_token":[]}]}},"/teams/management/change_name":{"patch":{"tags":["teams/management"],"operationId":"change_leader","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeLeaderModel"}}},"required":true},"responses":{"200":{"description":"Team name successfully changed."},"403":{"description":"User is not the leader of any team."},"404":{"description":"Team not found."},"500":{"description":"Internal server error."}},"security":[{"access_token":[]}]}},"/teams/management/invite_user":{"post":{"tags":["teams/management"],"operationId":"invite_user","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddUserModel"}}},"required":true},"responses":{"200":{"description":"User successfully invited to team."},"403":{"description":"User already belongs to team."},"404":{"description":"User not found."},"500":{"description":"Internal server error."}},"security":[{"access_token":["leader"]}]}},"/teams/management/kick_user":{"delete":{"tags":["teams/management"],"operationId":"kick_user","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemoveUserModel"}}},"required":true},"responses":{"200":{"description":"User successfully removed from team."},"403":{"description":"User is not a member of the team."},"404":{"description":"User not found."},"500":{"description":"Internal server error."}},"security":[{"access_token":[]}]}},"/teams/management/rename":{"patch":{"tags":["teams/management"],"operationId":"rename","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangeNameModel"}}},"required":true},"responses":{"200":{"description":"Team name successfully changed."},"403":{"description":"User is not the leader of any team."},"404":{"description":"Team not found."},"500":{"description":"Internal server error."}},"security":[{"access_token":[]}]}},"/teams/membership/leave_team":{"delete":{"tags":["teams/membership"],"operationId":"leave_team","responses":{"200":{"description":"User successfully left team."},"403":{"description":"User is not a member of the team."},"404":{"description":"User not found."},"500":{"description":"Internal server error."}},"security":[{"access_token":[]}]}},"/teams/membership/my_team":{"get":{"tags":["teams/membership"],"operationId":"my_team","responses":{"200":{"description":"Team successfully retrieved.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TeamWithMembers"}}}},"403":{"description":"User doesn't belong to any team."},"404":{"description":"Team not found."},"500":{"description":"Internal server error."}},"security":[{"access_token":[]}]}},"/user/":{"get":{"tags":["user"],"operationId":"user","responses":{"200":{"description":"Use information received.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInformationResponse"}}}},"500":{"description":"Internal server error."}},"security":[{"access_token":[]}]}},"/user/admin":{"get":{"tags":["admin"],"operationId":"only_admins","responses":{"200":{"description":"Use information received."},"500":{"description":"Internal server error."}},"security":[{"access_token":[]}]}}},"components":{"schemas":{"AddUserModel":{"type":"object","required":["username"],"properties":{"username":{"type":"string"}}},"ChangeLeaderModel":{"type":"object","required":["new_leader_username"],"properties":{"new_leader_username":{"type":"string"}}},"ChangeNameModel":{"type":"object","required":["new_name"],"properties":{"new_name":{"type":"string"}}},"Coordinates":{"type":"object","required":["x","y"],"properties":{"x":{"type":"integer","format":"int32"},"y":{"type":"integer","format":"int32"}}},"CreateTeamModel":{"type":"object","required":["team_name"],"properties":{"team_name":{"type":"string"}}},"LoginModel":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string"},"password":{"type":"string"}}},"RegisterModel":{"type":"object","required":["name","email","password"],"properties":{"email":{"type":"string"},"name":{"type":"string"},"password":{"type":"string"}}},"RemoveUserModel":{"type":"object","required":["username"],"properties":{"username":{"type":"string"}}},"ResponseData":{"type":"object","required":["version","name","about"],"properties":{"about":{"type":"string"},"name":{"type":"string"},"version":{"type":"string"}}},"SimpleTask":{"allOf":[{"$ref":"#/components/schemas/TaskDescription"},{"type":"object","required":["display"],"properties":{"display":{"$ref":"#/components/schemas/TaskDisplay"}}}]},"TaskDescription":{"type":"object","required":["id","name"],"properties":{"id":{"type":"string"},"name":{"type":"string"}}},"TaskDisplay":{"type":"object","required":["icon_coordinates"],"properties":{"icon_coordinates":{"$ref":"#/components/schemas/Coordinates"}}},"TaskStory":{"type":"object","required":["title","message"],"properties":{"message":{"type":"string"},"title":{"type":"string"}}},"TeamWithMembers":{"type":"object","required":["team_name","created_at","members"],"properties":{"created_at":{"type":"string","format":"date-time"},"members":{"type":"array","items":{"type":"string"}},"team_name":{"type":"string"}}},"UserInformationResponse":{"type":"object","required":["username","email"],"properties":{"email":{"type":"string"},"username":{"type":"string"}}}},"securitySchemes":{"access_token":{"type":"apiKey","in":"cookie","name":"access_token"}}}}